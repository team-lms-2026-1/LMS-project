# --- [1. ê³µí†µ ì„¤ì • (ëª¨ë“  í™˜ê²½ ì ìš©)] ---
spring:
  application:
    name: backend
  jpa:
    open-in-view: false
    properties:
      hibernate:
        format_sql: true # ë¡œê·¸ì— ì°íˆëŠ” SQL ì˜ˆì˜ê²Œ ì •ë ¬
  
  # Flyway ì„¤ì • (DB í˜•ìƒ ê´€ë¦¬)
  flyway:
    enabled: true
    baseline-on-migrate: true # ê¸°ì¡´ ë°ì´í„°ê°€ ìˆì–´ë„ Flyway ì ìš©

  # ğŸ” JWT ê³µí†µ ì„¤ì •
security:
  jwt:
    secret: ${JWT_SECRET:THIS_IS_A_LONG_SECRET_KEY_FOR_JWT_32_CHARS_MIN}
    access-token-seconds: 3600
    
logging:
  level:
    org.springframework.security: DEBUG
---
# --- [2. ë¡œì»¬ ê°œë°œ í™˜ê²½ (ë‚´ ì»´í“¨í„°)] ---
spring:
  config:
    activate:
      on-profile: local # í”„ë¡œí•„ ì´ë¦„: local
  
  datasource:
    url: jdbc:postgresql://localhost:5432/team_lms
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  
  jpa:
    # âš ï¸ ì¤‘ìš”: Flywayë¥¼ ì“°ë©´ ddl-autoëŠ” 'validate'ë¡œ ë°”ê¿”ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.
    # í•˜ì§€ë§Œ ë¡œì»¬ì—ì„œ í¸í•˜ê²Œ ê°œë°œí•˜ë ¤ë©´ ì ì‹œ updateë¡œ ë‘¬ë„ ë©ë‹ˆë‹¤.
    # ì •ì„ì€ 'validate'ë¡œ ë‘ê³  SQL íŒŒì¼ë¡œë§Œ í…Œì´ë¸”ì„ ìˆ˜ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
    hibernate:
      ddl-auto: validate 
    show-sql: true

---
# --- [3. ë°°í¬ í™˜ê²½ (EC2 + RDS)] ---
spring:
  config:
    activate:
      on-profile: prod # í”„ë¡œí•„ ì´ë¦„: prod
  
  datasource:
    # GitHub Actionsê°€ ë„£ì–´ì¤„ ê°’ë“¤ (ë³´ì•ˆ ì²˜ë¦¬)
    url: jdbc:postgresql://${RDS_ENDPOINT}:5432/postgres  # RDS ì´ˆê¸° DBëª…
    username: ${DB_USER}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: validate # ë°°í¬ í™˜ê²½ì—ì„œëŠ” ì ˆëŒ€ í…Œì´ë¸”ì„ ë§˜ëŒ€ë¡œ ë°”ê¾¸ë©´ ì•ˆ ë¨ (Flywayê°€ ê´€ë¦¬)
    show-sql: false # ìš´ì˜ ì„œë²„ ë¡œê·¸ ì ˆì•½